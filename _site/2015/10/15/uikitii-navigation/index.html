<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  
  <head>
  <meta charset="UTF-8">
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
    
      UIKit Fundamentals II - Navigation, Collection View, Tab View &middot; Recipe for Intelligence
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/styles.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/atom+xml" title="Recipe for Intelligence" href="/atom.xml">
</head>



  <body>

    <div class="container content">
      <div class="masthead">
        <h3 class="masthead-title">
          <a href="/" title="Home">Recipe for Intelligence</a>

          
              &nbsp;&nbsp;&nbsp;<small><a href="/about">About</a></small>
          
              &nbsp;&nbsp;&nbsp;<small><a href="/archive">Archive</a></small>
          

        </h3>
      </div>

      <article class="post">
  <h1 class="post-title">UIKit Fundamentals II - Navigation, Collection View, Tab View</h1>
  <time datetime="2015-10-15T00:00:00-05:00" class="post-date">15 Oct 2015</time>
  <h3 id="practice-app-make-your-own-adventure-myoa">Practice App: Make Your Own Adventure (MYOA)</h3>

<p>Follow the steps below to recreate the MYOA on your own.</p>

<p><strong>Step 1</strong>: Create a new single view application</p>

<p><strong>Step 2</strong>: Delete the single view controller (You can delete this view controller by selecting the 
yellow icon and then tapping the delete button)</p>

<p><strong>Step 3</strong>: Drag a UINavigationController into the storyboard from the object library.</p>

<p><strong>Step 4</strong>: Delete the automatically generated root view controller and drag in a new view 
controller. To reset the Navigation Controller’s Root View Controller property control click on the 
Navigation Controller’s round yellow icon and drag a line from the root view controller triggered 
segue to your new view controller.</p>

<p><strong>Step 5</strong>: Add two buttons to the bottom half of the view controller. Make them the full width of 
the view to allow room for text</p>

<p><strong>Step 7</strong>: Add a UITextView to the top half. You might want to change the font in the attribute 
inspector.</p>

<p><strong>Step 8</strong>: Change the text in the textview and buttons to provide a start for your story. To add 
newline characters to your text view, enter the text in the attribute inspector, and type 
option-return for a newline. The display of the text in Storyboard might be different than in 
the running app. Run the app at this point to check.</p>

<p><br>
<center><img src="/assets/images/uikitII/nav01.png" alt="Drawing" style="width: 200px;"></center>
<br></p>

<p><strong>Step 9</strong>: Copy and paste two new view controllers, to serve as the next story nodes. To copy 
an entire view controller scene, drag a rectangle around the whole view controller in Storyboard, 
then type command-c, command-v. The new view controller will be pasted directly on top of the old, 
so it will be difficult to see it until it is dragged off.</p>

<p><strong>Step 10</strong>: Change the text in the new nodes to continue the story.</p>

<p><strong>Step 11</strong>: Add Triggered Segues to the two buttons. Control click on each of the buttons, and 
drag a line from Triggered Segue → action to the new view controller.</p>

<p><br>
<center><img src="/assets/images/uikitII/nav02.png" alt="Drawing" style="width: 600px;"></center>
<br></p>

<p><strong>Step 12</strong>: Run, and verify that the navigation works.</p>

<p><strong>Step 13</strong>: Repeat, until the story is complete. Delete the buttons in the controllers representing 
endpoints of the story.</p>

<p>For a sample project, checkout the branch <strong>step5.1-makeYourOwnAdventure</strong>.</p>

<p><br></p>

<h4 id="add-a-start-over-button">Add a Start Over Button</h4>

<p><strong>Step 1</strong>: Set the class of each of the story nodes to “ViewController”. You can set them by 
selecting the round yellow icon for a view controller, then setting the class in the Identity Inspector.</p>

<p><strong>Step 2</strong>: Add the right bar button. In the viewDidLoad() method ViewController.swift add the 
following code:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="nb">self</span><span class="p">.</span><span class="n">navigationItem</span><span class="p">.</span><span class="n">rightBarButtonItem</span> <span class="o">=</span> <span class="bp">UIBarButtonItem</span> <span class="p">(</span>
                 <span class="nl">title</span><span class="p">:</span> <span class="s">&quot;Start Over&quot;</span><span class="p">,</span> 
                 <span class="nl">style</span><span class="p">:</span> <span class="n">UIBarButtonItemStyle</span><span class="p">.</span><span class="n">Plain</span><span class="p">,</span> 
                <span class="nl">target</span><span class="p">:</span> <span class="nb">self</span><span class="p">,</span> 
                <span class="nl">action</span><span class="p">:</span> <span class="s">&quot;startOver&quot;</span><span class="p">)</span>
</code></pre></div>
<p><strong>Step 3</strong>: Add the startOver method. Use the following code:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">func</span> <span class="nf">startOver</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="k">let</span> <span class="n">navigationController</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">navigationController</span> <span class="p">{</span>
           <span class="n">navigationController</span><span class="p">.</span><span class="n">popToRootViewControllerAnimated</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span>
        <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>To see a solution checkout the branch <strong>step5.2-makeYourOwnAdventure-startOver</strong>.</p>

<p><strong>NavigationController has a stack of ViewControllers</strong>.</p>

<p>Use <code>deinit</code> deinitializer to print out a message to see the stack behavior.</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">deinit</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">&quot;ViewController deallocated&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>And we can see that <strong>a ViewController is deinitialized when it slides off the screen to the right</strong>.
That&#39;s when it&#39;s popped off the stack.</p>

<h3 id="practice-app-bond-villain-revisited">Practice App: Bond Villain - Revisited</h3>

<p>Presenting the DetailViewController,</p>

<ul>
<li>Add the tableView(tableView: UITableView, didSelectRowAtIndexPath) method to ViewController</li>
<li>When a row is selected, push the detail view controller onto the navigation stack.</li>
</ul>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="nl">tableView</span><span class="p">:</span> <span class="bp">UITableView</span><span class="p">,</span> <span class="n">didSelectRowAtIndexPath</span> <span class="nl">indexPath</span><span class="p">:</span> <span class="bp">NSIndexPath</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">storyboard</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">storyboard</span><span class="o">!</span>
    <span class="k">let</span> <span class="n">detailController</span> <span class="o">=</span> <span class="n">storyboard</span><span class="p">.</span><span class="n">instantiateViewControllerWithIdentifier</span>
    <span class="p">(</span><span class="s">&quot;VillainDetailViewController&quot;</span><span class="p">)</span> <span class="kt">as</span><span class="o">!</span> <span class="n">VillainDetailViewController</span>
    <span class="n">detailController</span><span class="p">.</span><span class="n">villain</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">allVillains</span><span class="p">[</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="p">]</span>
    <span class="nb">self</span><span class="p">.</span><span class="n">navigationController</span><span class="o">!</span><span class="p">.</span><span class="n">pushViewController</span><span class="p">(</span><span class="n">detailController</span><span class="p">,</span> <span class="nl">animated</span><span class="p">:</span> <span class="nb">true</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>For the completed code for Bond Villains with Master-Detail checkout <strong>step5.6-bondVillains-masterDetail</strong>.</p>

<h3 id="practice-app-bond-villain-collection-view">Practice App: Bond Villain - Collection View</h3>

<p>There are two ways to set up table view controllers and collection view controllers in Storyboard:</p>

<ol>
<li>Start with a UIViewController and drag in a TableView or CollectionView.</li>
<li>Use a TableViewControlller or CollectionViewController.</li>
</ol>

<p>In the table views lesson we used option 1. Now we’ll set up our collection view using option 2.</p>

<p>For practice, go ahead and open up the BondVillainsInTabs project from this branch: 
<strong>step6.3-bondVillains-noCollectionView</strong></p>

<p>Steps to add a CollectionViewController alongside the TableViewController:</p>

<ul>
<li>Drag in a Navigation Controller.</li>
<li>Delete the root view controller that comes with the Navigation Controller.</li>
<li>Drag in a CollectionViewController.</li>
<li>Set the root view controller of the Navigation Controller to be the CollectionViewController you just added.</li>
<li>Add the Collection View Controller to the tab bar. To do this, control-click on the Tab Bar Controller. Under Triggered Segues drag from viewControllers to the Navigation Controller you just added.</li>
<li>Open the identity inspector and set the class of the CollectionViewController to “VillainCollectionViewController”. (For MemeMe, this will be the “SentMemesCollectionViewController”).</li>
<li>Click on the Collection View Cell in your Collection View.</li>
<li>Open the identity inspector and set the cell class and reuseIdentifier to be “VillainCollectionViewCell”. (For MemeMe, this will be the custom cell class you created earlier.)</li>
<li>For practice, drag a UIImageView into the Collection View Cell.</li>
<li>Connect the imageView outlet of the VillainCollectionViewCell to the UIImageView you just added.</li>
</ul>

<p>Note: be careful with the cell&#39;s reuseIdentifier. I had a typo with the wrong case of the first letter and it crashed.</p>

<h3 id="troubleshooting-collection-views">Troubleshooting Collection Views</h3>

<p><strong>&quot;I can’t see my Sent Memes Collection View.&quot;</strong></p>

<p>Check to make sure the classes for the CollectionViewController and the MemeCollectionViewCell 
have been set in storyboard.</p>

<p>The name of the CollectionViewController class, for example “SentMemesCollectionViewController”, 
needs to be set in the identity inspector so that it matches that of the .swift file.</p>

<p>The name of your custom collection view cell, for example, “CustomMemeCell” needs to be entered in 
two places:as the class name in the identity inspector and as the reuseIdentifier in the 
attributes inspector.</p>

<p><strong>&quot;I added a new meme, but I don’t see it in my Sent Memes Collection View.&quot;</strong></p>

<p><em>Your memes array copy may not be up to date.</em></p>

<p>You can ensure that your memes array is updated by defining the memes property in your 
CollectionViewController so that it accesses the memes array stored in the AppDelegate, 
similar to what is shown in the code below.</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">var</span> <span class="nl">memes</span><span class="p">:</span> <span class="p">[</span><span class="n">Meme</span><span class="p">]</span><span class="o">!</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">object</span> <span class="o">=</span> <span class="bp">UIApplication</span><span class="p">.</span><span class="n">sharedApplication</span><span class="p">().</span><span class="n">delegate</span>
    <span class="k">let</span> <span class="n">appDelegate</span> <span class="o">=</span> <span class="n">object</span> <span class="kt">as</span><span class="o">!</span> <span class="n">AppDelegate</span>
    <span class="k">return</span> <span class="n">appDelegate</span><span class="p">.</span><span class="n">memes</span>
<span class="p">}</span>
</code></pre></div>
<p>Your collection view may not be loading the most recent version of the memes array.</p>

<p>If you are adding or deleting memes and you don’t see this reflected in your Sent Memes Collection 
View you may need to refresh the collection view. The simplest way to do this is to call the 
UICollectionView method, <code>reloadData()</code>. If <code>reloadData()</code> is called in the viewWillAppear method of 
your CollectionViewController, the collection view will be refreshed every time the view appears.</p>

<p>Calling <code>reloadData()</code> looks something like this: <code>self.collectionView!.reloadData()</code></p>

<p>Note: For better performance, there are other more refined methods specifically for adding and 
deleting items from a collection. Read more about them 
<a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UICollectionView_class/#//apple_ref/doc/uid/TP40012177-CH1-SW35">here</a>.</p>

<h3 id="challenge-app-data-driven-myoa">Challenge App: Data-Driven MYOA</h3>

<h3 id="mememe-2-0-note">MemeMe 2.0 Note</h3>

<ul>
<li>Put the bottom tool bar above the bottom tab bar (which is automatically added by the tap view controller)
to avoid being hidden.</li>
<li>Must set row height in the size inspector for <strong>BOTH</strong> the table view and the cell to change cell height.</li>
<li>Do not forget to set table view&#39;s delegate and dataSource (right click it in the outline) to the 
view controller in storyboard (the yellow icon).</li>
<li>Do not declare new array and make copy in viewDidLoad(), instead, declare <code>memes</code> array like this
in the table view controller.</li>
</ul>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">var</span> <span class="nl">memes</span><span class="p">:</span> <span class="p">[</span><span class="n">Meme</span><span class="p">]{</span> <span class="k">return</span> <span class="p">(</span><span class="bp">UIApplication</span><span class="p">.</span><span class="n">sharedApplication</span><span class="p">().</span><span class="n">delegate</span> <span class="kt">as</span><span class="o">!</span> <span class="n">AppDelegate</span><span class="p">).</span><span class="n">memes</span> <span class="p">}</span>
</code></pre></div>
<ul>
<li>Use <strong>UICollectionViewFlowLayout</strong> to customize the collection view.</li>
</ul>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="p">@</span><span class="kt">IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nl">flowLayout</span><span class="p">:</span> <span class="bp">UICollectionViewFlowLayout</span><span class="o">!</span>

    <span class="kr">override</span> <span class="k">func</span> <span class="n">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">super</span><span class="p">.</span><span class="n">viewDidLoad</span><span class="p">()</span>

        <span class="k">let</span> <span class="nl">space</span><span class="p">:</span> <span class="n">CGFloat</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">let</span> <span class="n">dimension</span> <span class="o">=</span> <span class="p">(</span><span class="n">view</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">space</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.0</span>

        <span class="n">flowLayout</span><span class="p">.</span><span class="n">minimumInteritemSpacing</span> <span class="o">=</span> <span class="n">space</span>
        <span class="n">flowLayout</span><span class="p">.</span><span class="n">minimumLineSpacing</span> <span class="o">=</span> <span class="n">space</span>
        <span class="n">flowLayout</span><span class="p">.</span><span class="n">itemSize</span> <span class="o">=</span> <span class="n">CGSizeMake</span><span class="p">(</span><span class="n">dimension</span><span class="p">,</span> <span class="n">dimension</span><span class="p">)</span>
    <span class="p">}</span>
</code></pre></div>
</article>


<aside class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2015/11/01/iOSNetworking/">
            iOS Networking with Swift
            <small><time datetime="2015-11-01T00:00:00-05:00">01 Nov 2015</time></small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2015/10/14/logistic-regression-on-apache-spark/">
            Logistic Regression with Apache Spark
            <small><time datetime="2015-10-14T00:00:00-05:00">14 Oct 2015</time></small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2015/10/13/an-overview-of-logistic-regression/">
            An Overview of Logistic Regression
            <small><time datetime="2015-10-13T00:00:00-05:00">13 Oct 2015</time></small>
          </a>
        </h3>
      </li>
    
  </ul>
</aside>


<script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

  
<!-- Add Disqus comments. -->
<div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'loganyc1934'; // required: replace example with your forum shortname
  var disqus_identifier = "/2015/10/15/uikitii-navigation/";

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



      <div class="footer">
        <p>
          &copy; 2015. All rights reserved.
        </p>
      </div>
    </div>

  </body>
</html>

<script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>